# 通信协议

## 1. CAN

	### 	

## 2. LIN

 * LIN（Local Interconnect Network）是CAN（Controller Area Network）的补充。

 * 单数据线串行通信，通常用UART接口通信（***接口*** & ***协议***），低成本、简单、低速。多用于车门、车窗、车灯等控制。

 * 主从架构：一个主节点和若干从节点（一般最多15个），主节点调度和控制通信，从节点被动响应主节点的命令。

 * 同步机制：通过同步字段（Sync Field）和标识符字段（Identifier Field）来实现节点的同步。

   <img src="https://pic2.zhimg.com/v2-99ab1663773aab1178888fc4d7165d3d_r.jpg" alt="img" style="zoom:50%;" />

   ***

   ##### 帧结构

   <img src="https://pic4.zhimg.com/v2-acabef5c62959abaccb9ea881b5c3887_r.jpg" alt="img" style="zoom:50%;" />

    1. **Break同步间隔字段**：用于指示帧的开始，由主节点发送，用于唤醒从节点并同步通信。Break段至少13位显性电平和至少1位隐性间隔符（总共14bit）。

    2. **Sync同步字段**：用于同步从节点的波特率，通常为0x55（01010101b）；主机时钟精度要高。

       ​	**Tips：字节域（Byte Field）**：1位显性起始位+8位data+1位隐性停止位（”显开隐走“），是一种标准的UART传输格式。在Lin的一帧中除Break段外都是以ByteField传输的，低位先行。

       <img src="https://pic3.zhimg.com/v2-10db3a69fec2fadf942c9fa6d17f259a_r.jpg" alt="img" style="zoom:50%;" />

       有：	`传输1位时间 = (第7位下降沿 - 起始位下降沿) / 8`

       即主节点位速率，从节点计算出用来同步自身速率。

       

    3. **Protected Identifier受保护ID字段（8位PID）**：包含帧的类别和目的地，包括6位帧ID和2位奇偶校验位。

       <img src="https://pic3.zhimg.com/v2-e3541718b5d77ff994552c06df0e55e6_r.jpg" alt="img" style="zoom:50%;" />

       帧ID取值范围0x00~0x3F，共64个，从机根据该ID做出反应（接收/发送/忽略）。校验位如下：

       <img src="https://pic1.zhimg.com/v2-d638af4335e6f7358708fd2f82c1391c_r.jpg" alt="img" style="zoom:50%;" />

       由于异或运算，PID段不会出现全0或全1，若从节点收到0xFF、0x00则传输错误。

       

    4. **数据字段**：包含实际传输的数据，长度为1到8字节（常用（2、4）8字节），两种数据类型：信号和诊断消息。Lin并没有规定数据长度的信息，需要提前设定。

    5. **校验字段**：用于错误检测，采用经典校验和（Checksum）算法。

   ***

​	[参考](https://www.zhihu.com/search?type=content&q=lin%E5%8D%8F%E8%AE%AE)



## 3. SENT

​	

## 4. ETH

​	

## 5. I2C

​	

## 6. I3C

​	

## 7. SPI

​	

## 8. UART

​	

